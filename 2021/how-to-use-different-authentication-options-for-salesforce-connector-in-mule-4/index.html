<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1">
<script src=/js/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0,theme:'neutral',securityLevel:'loose'})</script>
<link href=/css/fonts.css rel=stylesheet type=text/css>
<title>How to Use Different Authentication Options for Salesforce Connector in Mule 4</title>
<link rel=stylesheet href=/css/hugo-octopress.css>
<link rel=stylesheet href=/css/fork-awesome.min.css>
<link href=https://www.dhimate.com/favicon.png rel=icon>
<meta name=description content="Authentication options for Salesforce Connector in Mule 4">
<meta name=keywords content="[Yogesh Dhimate dhimate MuleSoft]">
<meta name=author content="Yogesh Dhimate">
<meta name=generator content="Hugo 0.91.2">
</head>
<body>
<header role=banner>
<hgroup>
<h1><a href=https://www.dhimate.com/>Yogesh Dhimate</a></h1>
<h2>Notes to Myself</h2>
</hgroup></header>
<nav role=navigation>
<fieldset class=mobile-nav>
<select onchange="location=this.value"><option value>Navigate…</option><option value=https://www.dhimate.com/about/>» About Me!</option><option value=https://www.dhimate.com/r%C3%A9sum%C3%A9/>» Résumé</option><option value=https://www.dhimate.com/blog/>» Blog</option><option value=https://www.dhimate.com/books/>» Bookshelf</option></select>
</fieldset>
<ul class=main-navigation>
<li><a href=https://www.dhimate.com/about/ title="About Me!" rel="noopener noreferrer">About Me!</a></li>
<li><a href=https://www.dhimate.com/r%C3%A9sum%C3%A9/ title=Résumé rel="noopener noreferrer">Résumé</a></li>
<li><a href=https://www.dhimate.com/blog/ title=Blog rel="noopener noreferrer">Blog</a></li>
<li><a href=https://www.dhimate.com/books/ title=Bookshelf rel="noopener noreferrer">Bookshelf</a></li>
</ul>
<ul class=subscription>
<a href=https://www.dhimate.com/index.xml target=_blank type=application/rss+xml title=RSS rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a>
</ul>
<form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer">
<fieldset role=search>
<input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://www.dhimate.com/>
</fieldset>
</form>
</nav>
<div id=main>
<div id=content>
<div>
<article class=hentry role=article>
<header>
<p class=meta>Jan 16, 2021
- 4 minute read
- <a class=label href=https://www.dhimate.com/categories/programming/>Programming </a>
</p>
<h1 class=entry-title>
How to Use Different Authentication Options for Salesforce Connector in Mule 4
</h1>
</header>
<div class=entry-content>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#introduction>Introduction</a></li>
<li><a href=#software-prerequisites>Software Prerequisites</a></li>
<li><a href=#configuration>Configuration</a>
<ul>
<li><a href=#security-token-in-salesforce>Security Token in Salesforce</a></li>
<li><a href=#certificate-setup-in-salesforce>Certificate setup in Salesforce</a></li>
<li><a href=#connected-app-setup-in-salesforce>Connected App setup in Salesforce</a></li>
</ul>
</li>
<li><a href=#basic-authentication>Basic Authentication</a></li>
<li><a href=#oauth-jwt>OAuth JWT</a></li>
<li><a href=#oauth-saml>OAuth SAML</a></li>
<li><a href=#oauth-username-password>OAuth Username Password</a></li>
</ul>
</li>
</ul>
</nav>
<h2 id=introduction>Introduction</h2>
<p>MuleSoft offers multiple connectors for Salesforce integration. This post is about Salesforce Connector for Mule 4. This connector helps in integrating with Sales Cloud, Service Cloud, Salesforce Platform, and Force.com. We will specifically look into different options for authentication with Salesforce.</p>
<h2 id=software-prerequisites>Software Prerequisites</h2>
<p>You need a Salesforce developer account. You can get one for free by signing up <a href=https://developer.salesforce.com/signup>here</a>. I have used the following versions for MuleSoft software.</p>
<ol>
<li>Anypoint Studio 7.7</li>
<li>Salesforce Connector 10.8.0</li>
</ol>
<h2 id=configuration>Configuration</h2>
<h3 id=security-token-in-salesforce>Security Token in Salesforce</h3>
<p>Salesforce security token is an alphanumeric code associated with your password. You do not need a security token if you are trying to authenticate from an IP address that is inside your Salesforce org&rsquo;s trusted IP range, or your Salesforce profile&rsquo;s login IP range. When you sign up for a new developer account, your Salesforce org does not have trusted IP ranges. You can either set up trusted or login IP ranges in your org, or use the security token for authentication. Generating security token is simple.</p>
<ol>
<li>
<p>Go to settings<br>
<figure><img src=/img/2021/salesforce-connector-auth/settings-salesforce.jpg alt=dwarf width=300px>
</figure>
</p>
</li>
<li>
<p>Reset security token by using the &lsquo;Reset My Security Token&rsquo; menu and clicking on the &lsquo;Reset Security Token&rsquo; button.
<figure><img src=/img/2021/salesforce-connector-auth/reset-security-token.jpg alt=dwarf width=500px>
</figure>
</p>
</li>
<li>
<p>You should receive your new security token in your email account that you used to sign up for the Salesforce developer account.</p>
</li>
</ol>
<h3 id=certificate-setup-in-salesforce>Certificate setup in Salesforce</h3>
<p>For certificate-based security, you need to set up a certificate in Salesforce.</p>
<ol>
<li>
<p>Go to setup
<figure><img src=/img/2021/salesforce-connector-auth/setup-salesforce.jpg alt=dwarf width=300px>
</figure>
</p>
</li>
<li>
<p>Search for certificate and key management and select the option
<figure><img src=/img/2021/salesforce-connector-auth/certificate-key-management-menu.jpg alt=dwarf width=300px>
</figure>
</p>
</li>
<li>
<p>Click on &lsquo;Create Self-Signed Certificate&rsquo; button to create a new certificate and enter the information and save it.
<figure><img src=/img/2021/salesforce-connector-auth/create-self-signed-certificate.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>Once certificate is created, download the certificate (.crt) file. We need it for setting up the connected app.
<figure><img src=/img/2021/salesforce-connector-auth/download-certificate.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>Export the certificate to keystore. We need it to configure the connection information in Mule app.
<figure><img src=/img/2021/salesforce-connector-auth/export-to-keystore.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>Enter the password when exporting to keystore
<figure><img src=/img/2021/salesforce-connector-auth/enter-password.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>Make sure you save both the .crt file (downloaded in step 4 above) and the .jks file safely on your disk.</p>
</li>
</ol>
<h3 id=connected-app-setup-in-salesforce>Connected App setup in Salesforce</h3>
<ol>
<li>
<p>Go to setup
<figure><img src=/img/2021/salesforce-connector-auth/setup-salesforce.jpg alt=dwarf width=300px>
</figure>
</p>
</li>
<li>
<p>Search for app manager and select the &lsquo;App Manager&rsquo; option
<figure><img src=/img/2021/salesforce-connector-auth/app-manager-option.jpg alt=dwarf width=300px>
</figure>
</p>
</li>
<li>
<p>Use the &lsquo;New Connected App&rsquo; button to create a new connected app.
<figure><img src=/img/2021/salesforce-connector-auth/new-connected-app.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>Fill in name and email. Select ‘Enable OAuth Settings’ Enter two Callback URLs</p>
<ul>
<li><a href=https://oauthdebugger.com/debug>https://oauthdebugger.com/debug</a></li>
<li>http://localhost:8081</li>
</ul>
</li>
</ol>
<p>Select ‘Use digital signatures’ and upload the .crt file received when setting up the certificate above.
Select all the OAuth Scopes if possible
<figure><img src=/img/2021/salesforce-connector-auth/create-connected-app.jpg alt=dwarf width=800px>
</figure>
Note the client_id and client_Secret</p>
<ol start=5>
<li>
<p>In your connected app&rsquo;s page, click on Manage button to review and update the app policies. Click on Manage.
<figure><img src=/img/2021/salesforce-connector-auth/manage-connected-app-menu.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>And then on &lsquo;Edit Policies&rsquo;
<figure><img src=/img/2021/salesforce-connector-auth/edit-policies.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
<li>
<p>In the Permitted Users option you can see two options</p>
<ul>
<li>
<p>Admin approved users are pre-authorized.</p>
<p>We will not go into the details of this option, but if you want to use it you can use the following steps</p>
<ul>
<li>Go to Settings > Manage Users > Profiles</li>
<li>Edit the profile associated with the user</li>
<li>For ‘Connected App Access’ under the profile, select the checkbox against the connected app. Save.</li>
</ul>
</li>
<li>
<p>All users may self-authorize.</p>
<p>We will use this option. Ensure that you select this option and save the policy.
<figure><img src=/img/2021/salesforce-connector-auth/connected-app-policy.jpg alt=dwarf width=800px>
</figure>
</p>
</li>
</ul>
</li>
<li>
<p>Open your browser and go to <a href=https://oauthdebugger.com/>https://oauthdebugger.com/</a>. Enter following details</p>
<ul>
<li>Authorization url = ‘https://login.salesforce.com/services/oauth2/authorize’</li>
<li>Redirect URI = ‘https://oauthdebugger.com/debug’</li>
<li>Client ID = obtained from the connected app</li>
<li>Scope = ‘api refresh_token offline_access’</li>
<li>Response type = ‘code’</li>
<li>Response mode = ‘query’</li>
<li>Click on “send request”</li>
</ul>
</li>
</ol>
<figure><img src=/img/2021/salesforce-connector-auth/oauth-debugger-screen.jpg alt=dwarf width=800px>
</figure>
<ol start=9>
<li>
<p>It should redirect you to enter your credentials on Salesforce login screen and you should receive an authorization code.
<figure><img src=/img/2021/salesforce-connector-auth/salesforce-oauth-consent.jpg alt=dwarf width=500px>
</figure>
</p>
</li>
<li>
<p>This will complete the connected app setup.</p>
</li>
</ol>
<h2 id=basic-authentication>Basic Authentication</h2>
<p>Basic authentication is the easiest way to authenticate with Salesforce. For basic authentication you need username and password, and optionally a <a href=#configuration>security token</a>.
<figure><img src=/img/2021/salesforce-connector-auth/basic-auth-test-connection.jpg alt=dwarf width=800px>
</figure>
</p>
<h2 id=oauth-jwt>OAuth JWT</h2>
<p>For OAuth JWT connection copy and paste the key store file (.jks) that you created in the certificate setup section into the src/main/resources folder.</p>
<ul>
<li>Consumer Key – Consumer key of the Connected App that was created in Salesforce</li>
<li>Key Store – Keystore file (.jks) that you downloaded from the certificate setup</li>
<li>Store Password – Keystore password that was created when you generated the key store file</li>
<li>Principal – Salesforce username of the user that was approved against the authorization URL</li>
</ul>
<figure><img src=/img/2021/salesforce-connector-auth/oauth-jwt-connection.jpg alt=dwarf width=800px>
</figure>
<h2 id=oauth-saml>OAuth SAML</h2>
<p>For OAuth SAML connection copy and paste the key store file (.jks) that you created in the certificate setup section into the src/main/resources folder.</p>
<ul>
<li>Consumer Key – Consumer key of the Connected App that was created in Salesforce</li>
<li>Key Store – Keystore file (.jks) that you downloaded from the certificate setup</li>
<li>Store Password – Keystore password that was created when you generated the key store file</li>
<li>Principal – Salesforce username of the user that was approved against the authorization URL</li>
</ul>
<figure><img src=/img/2021/salesforce-connector-auth/oauth-saml-connection.jpg alt=dwarf width=800px>
</figure>
<h2 id=oauth-username-password>OAuth Username Password</h2>
<p>For OAuth Username Password configure the following properties</p>
<ul>
<li>Consumer Key – Consumer key of the Connected App that was created in Salesforce</li>
<li>Consumer Secret – Consumer secret of the Connected App that was created in Salesforce</li>
<li>Username – Salesforce login id</li>
<li>Password – Salesforce password</li>
<li>Security Token - Security token associated with the username</li>
</ul>
<figure><img src=/img/2021/salesforce-connector-auth/oauth-username-password.jpg alt=dwarf width=800px>
</figure>
</div>
<footer>
<p class=meta>
<span class="byline author vcard">Posted by <span class=fn>Yogesh Dhimate</span></span>
<time>Jan 16, 2021</time>
<span class=categories>
Tags:
<a class=category href=https://www.dhimate.com/tags/mulesoft>MuleSoft</a>
</span>
</p>
<p class=meta>
<a class="basic-alignment left" href=https://www.dhimate.com/2021/reflections-on-range-by-david-epstein/ title="Reflections on Range by David Epstein">Reflections on Range by David Epstein</a>
<a class="basic-alignment right" href=https://www.dhimate.com/2021/using-epics-fhir-apis-in-mule-4/ title="Using Epic's FHIR APIs in Mule 4">Using Epic's FHIR APIs in Mule 4</a>
</p>
</footer>
</article>
</div>
<aside class="sidebar thirds">
<section class="first odd">
<h1>Who am I?</h1>
<p>
I’m Yogesh Dhimate. This is my personal website.
All opinions expressed here are my own.
Click on <a href=/about>About</a> to know more.
</p>
</section>
<ul class=sidebar-nav>
<li class=sidebar-nav-item>
<a target=_blank rel="noopener noreferrer" href=https://github.com/dhimate/ title=https://github.com/dhimate/><i class="fa fa-github fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://twitter.com/ydhimate/ title=https://twitter.com/ydhimate/><i class="fa fa-twitter fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/in/dhimate title=https://www.linkedin.com/in/dhimate><i class="fa fa-linkedin fa-3x"></i></a>
</li>
</ul>
<section class=odd>
<h1>Collections</h1>
<li>
<a href=https://www.dhimate.com/categories/programming/ title=Programming>Programming</a>
</li>
<li>
<a href=https://www.dhimate.com/tags/mulesoft/ title=MuleSoft>MuleSoft</a>
</li>
<li>
<a href=https://www.dhimate.com/categories/personal/ title=Personal>Personal</a>
</li>
</section>
<section class=even>
<h1>Recent Posts</h1>
<ul id=recent_posts>
<li class=post>
<a href=/2021/facebook-annoyance/>Facebook Annoyance</a>
</li>
<li class=post>
<a href=/2021/making-clay-ganesha-at-home/>Making Clay Ganesha At Home</a>
</li>
<li class=post>
<a href=/2021/thinking-in-bets/>Thinking in Bets</a>
</li>
<li class=post>
<a href=/2021/oci-application/>OCI Application Experience</a>
</li>
<li class=post>
<a href=/2021/understanding-smart-on-fhir/>Understanding SMART on FHIR</a>
</li>
<li class=post>
<a href=/2021/about-thanks-for-the-feedback/>About Thanks for the Feedback</a>
</li>
</ul>
</section>
</aside>
</div>
</div>
<footer role=contentinfo>
<p>Copyright &copy; 2022 Yogesh Dhimate - <a href=https://www.dhimate.com/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.
</p>
</footer>
</body>
</html>