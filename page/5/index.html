<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,theme:'neutral',securityLevel:'loose'})</script><link href=/css/fonts.css rel=stylesheet type=text/css><title>Yogesh Dhimate</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://www.dhimate.com/favicon.png rel=icon><link href=/index.xml rel=alternate type=application/rss+xml title="Yogesh Dhimate"><meta name=description content><meta name=keywords content><meta name=author content="Yogesh Dhimate"><meta name=generator content="Hugo 0.81.0"></head><body><header role=banner><hgroup><h1><a href=https://www.dhimate.com/>Yogesh Dhimate</a></h1><h2>Notes to Myself</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigate…</option><option value=https://www.dhimate.com/about/>» About</option><option value=https://www.dhimate.com/r%C3%A9sum%C3%A9/>» Résumé</option><option value=https://www.dhimate.com/blog/>» Blog</option><option value=https://www.dhimate.com/books/>» Books I Read</option></select></fieldset><ul class=main-navigation><li><a href=https://www.dhimate.com/about/ title=About>About</a></li><li><a href=https://www.dhimate.com/r%C3%A9sum%C3%A9/ title=Résumé>Résumé</a></li><li><a href=https://www.dhimate.com/blog/ title=Blog>Blog</a></li><li><a href=https://www.dhimate.com/books/ title="Books I Read">Books I Read</a></li></ul><ul class=subscription></ul><form action=https://www.google.com/search method=get target=_blank><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://www.dhimate.com/></fieldset></form></nav><div id=main><div id=content><div class=blog-index><article><header><p class=meta>Sep 24, 2017
- 3 minute read
- <a href=https://www.dhimate.com/2017/automated-testing-of-webmethods-services-with-rest-assured/#disqus_thread>Comments</a>
- <a class=label href=https://www.dhimate.com/categories/programming/>Programming</a></p><h1 class=entry-title><a href=https://www.dhimate.com/2017/automated-testing-of-webmethods-services-with-rest-assured/>Automated Testing of Webmethods Services with REST Assured</a></h1></header><p>While testing REST APIs for one of my projects, I found REST Assured. It was perfect, as it took care of low level HTTP calls under the hood, and provided a high-level, easy to use framework to write tests. Not only REST Assured works really well to test webMethods flow services, you can also run these tests as part of Continuous Integration process through Gradle.</p><p>You will need following things on your machine. Make sure these are working without any issues.</p><ul><li>Java JDK 1.8 (<a href=http://www.oracle.com/technetwork/java/javase/downloads/index.html>link</a>). Set JAVA_HOME. And add JAVA_HOME to your PATH</li><li>IntelliJ IDEA (<a href=http://www.jetbrains.com/idea/download/>link</a>)</li></ul><p>We will write automated tests for a simple flow service that adds two numbers.</p><p><img src=/img/2017/Flow_Service.gif alt=Flow_Service></p><p>Follow following steps to create automated tests.</p><ul><li><p>Open IntelliJ IDEA and create a new project</p><p><img src=/img/2017/Create_Project.gif alt=Create_Project></p></li><li><p>Add following lines in your build.gradle file</p></li></ul><figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>dependencies <span style=color:#f92672>{</span>
    testCompile group<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>junit<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> name<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>junit<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> version<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>4<span style=color:#f92672>.</span><span style=color:#a6e22e>12</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
    testCompile group<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>hamcrest</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> name<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>hamcrest<span style=color:#f92672>-</span>library<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> version<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>1<span style=color:#f92672>.</span><span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
    testCompile group<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>hamcrest</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> name<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>hamcrest<span style=color:#f92672>-</span>core<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> version<span style=color:#f92672>:</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>1<span style=color:#f92672>.</span><span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
    testCompile <span style=color:#960050;background-color:#1e0010>&#39;</span>io<span style=color:#f92672>.</span><span style=color:#a6e22e>rest</span><span style=color:#f92672>-</span>assured<span style=color:#f92672>:</span>rest<span style=color:#f92672>-</span>assured<span style=color:#f92672>:</span>3<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>.</span><span style=color:#a6e22e>3</span><span style=color:#960050;background-color:#1e0010>&#39;</span>
<span style=color:#f92672>}</span>

task <span style=color:#a6e22e>wrapper</span><span style=color:#f92672>(</span>type<span style=color:#f92672>:</span> Wrapper<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    gradleVersion <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>2<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#960050;background-color:#1e0010>&#39;</span> <span style=color:#75715e>//version required
</span><span style=color:#75715e></span><span style=color:#f92672>}</span> </code></pre></td></tr></table></div></div></div></figure><p><img src=/img/2017/Update_BuildGradle.gif alt=Update_BuildGradle></p><ul><li><p>Create new package for our test cases</p><p><img src=/img/2017/Create_Package.gif alt=Create_Package></p></li><li><p>Create new Java class for our tests.</p></li></ul><figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#f92672>package</span> com.dhimate.wm<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> org.junit.Before<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> org.junit.Test<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> io.restassured.RestAssured<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> io.restassured.response.Response<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.HashMap<span style=color:#f92672>;</span>
<span style=color:#f92672>import static</span> io.restassured.RestAssured.given<span style=color:#f92672>;</span>
<span style=color:#f92672>import static</span> io.restassured.RestAssured.basic<span style=color:#f92672>;</span>
<span style=color:#f92672>import static</span> org.hamcrest.MatcherAssert.assertThat<span style=color:#f92672>;</span>
<span style=color:#f92672>import static</span> org.hamcrest.Matchers.equalTo<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AddNumbersTest</span> <span style=color:#f92672>{</span>

	<span style=color:#a6e22e>@Before</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setUp</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
		RestAssured<span style=color:#f92672>.</span><span style=color:#a6e22e>baseURI</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://localhost:5555/invoke&#34;</span><span style=color:#f92672>;</span>
		RestAssured<span style=color:#f92672>.</span><span style=color:#a6e22e>authentication</span> <span style=color:#f92672>=</span> basic<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Administrator&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;manage&#34;</span><span style=color:#f92672>);</span>
	<span style=color:#f92672>}</span>

	<span style=color:#a6e22e>@Test</span>
	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>AddNumbersTestSuccess</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
		String requestBody <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;{&#34;</span> <span style=color:#f92672>+</span>
                    <span style=color:#e6db74>&#34;\&#34;num1\&#34;:\&#34;10\&#34;,&#34;</span> <span style=color:#f92672>+</span>
                    <span style=color:#e6db74>&#34;\&#34;num2\&#34;:\&#34;20\&#34;&#34;</span> <span style=color:#f92672>+</span>
                    <span style=color:#e6db74>&#34;}&#34;</span><span style=color:#f92672>;</span>

		Response response <span style=color:#f92672>=</span> given<span style=color:#f92672>().</span>
                	header<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Content-Type&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;application/json&#34;</span><span style=color:#f92672>).</span>
	                body<span style=color:#f92672>(</span>requestBody<span style=color:#f92672>).</span>
       			put<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Yogesh.flow/addNumbers&#34;</span><span style=color:#f92672>);</span>

        		response<span style=color:#f92672>.</span><span style=color:#a6e22e>getBody</span><span style=color:#f92672>().</span><span style=color:#a6e22e>prettyPrint</span><span style=color:#f92672>();</span>

        		HashMap responseBody <span style=color:#f92672>=</span> response<span style=color:#f92672>.</span><span style=color:#a6e22e>jsonPath</span><span style=color:#f92672>().</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>

        		assertThat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;status code&#34;</span><span style=color:#f92672>,</span> response<span style=color:#f92672>.</span><span style=color:#a6e22e>getStatusCode</span><span style=color:#f92672>(),</span> equalTo<span style=color:#f92672>(</span>200<span style=color:#f92672>));</span>
        		assertThat<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;sum&#34;</span><span style=color:#f92672>,</span> responseBody<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;sum&#34;</span><span style=color:#f92672>),</span> equalTo<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;30&#34;</span><span style=color:#f92672>));</span>
    	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span></code></pre></td></tr></table></div></div></div></figure><p>Here we are just taking advantage of Integration Server&rsquo;s built in content handler for Content Type - &lsquo;application/json&rsquo;. For the flow service available on Integration Server, we can simply pass JSON request using REST Assured framework. Integration Server will take care of converting this to IDoc and subsequently process it to return a JSON response back to your test case.</p><ul><li>Run the tests using Gradle wrapper</li></ul><p>Gradle wrapper provides a convenient and easy to use CLI to run your tests. Using Gradle wrapper you can quickly associate your REST Assured tests with your Continuous Integration process.</p><p><img src=/img/2017/Gradle_Wrapper.gif alt=Gradle_Wrapper></p><p>Good thing about using REST Assured and Hamcrest to test your webMethods flow services is, it is completely FREE. You don&rsquo;t need to buy an expensive automated testing solution to test your flow services.</p><p>Further resources to read</p><ol><li>REST Assured has comprehensive <a href=https://github.com/rest-assured/rest-assured/wiki/GettingStarted>documentation</a> available to get you started.</li><li>Excellent tutorial on <a href=http://www.vogella.com/tutorials/Gradle/article.html>Gradle</a> and <a href=http://www.vogella.com/tutorials/Hamcrest/article.html>Hamcrest</a> by Vogella.</li></ol></article><article><header><p class=meta>Aug 24, 2016
- 5 minute read
- <a href=https://www.dhimate.com/2016/using-web-services-client-adapter-in-apama/#disqus_thread>Comments</a>
- <a class=label href=https://www.dhimate.com/categories/programming/>Programming</a></p><h1 class=entry-title><a href=https://www.dhimate.com/2016/using-web-services-client-adapter-in-apama/>Using Web Services Client adapter in Apama</a></h1></header><p>Software AG Apama provides a SOAP-based Web Services Client adapter to invoke web services from your Apama application. In this post, we will see how to use this adapter in your application.</p><p>We will use a free web service available at CDYNE (link) for our application. This service has multiple operations, out of which we will use GetCityWeatherByZIP operation.</p><p>Below are the sample request and response messages for this operation, which we will use to describe our event definition in Apama.</p><p>Request XML<figure class=code><figcaption><span>Request XML</span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#f92672>&lt;soap:envelope</span> 
    <span style=color:#a6e22e>xmlns:soap=</span><span style=color:#e6db74>&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span> 
    <span style=color:#a6e22e>xmlns:xsd=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema&#34;</span> 
    <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;soap:body&gt;</span>
        <span style=color:#f92672>&lt;GetCityWeatherByZip</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://ws.cdyne.com/WeatherWS/&#34;</span><span style=color:#f92672>&gt;</span>
        <span style=color:#f92672>&lt;Zip&gt;</span>43209<span style=color:#f92672>&lt;/Zip&gt;</span>
        <span style=color:#f92672>&lt;/GetCityWeatherByZip&gt;</span>
    <span style=color:#f92672>&lt;/soap:body&gt;</span>
    <span style=color:#f92672>&lt;/soap:envelope&gt;</span></code></pre></td></tr></table></div></div></div></figure></p><p>Response XML<figure class=code><figcaption><span>Response XML</span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#f92672>&lt;soap:Envelope</span> 
    <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> 
    <span style=color:#a6e22e>xmlns:xsd=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema&#34;</span> 
    <span style=color:#a6e22e>xmlns:soap=</span><span style=color:#e6db74>&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;soap:Body&gt;</span>
        <span style=color:#f92672>&lt;GetCityWeatherByZIPResponse</span> 
        <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://ws.cdyne.com/WeatherWS/&#34;</span><span style=color:#f92672>&gt;</span>
        <span style=color:#f92672>&lt;GetCityWeatherByZIPResult&gt;</span>
            <span style=color:#f92672>&lt;Success&gt;</span>true<span style=color:#f92672>&lt;/Success&gt;</span>
            <span style=color:#f92672>&lt;ResponseText&gt;</span>City Found<span style=color:#f92672>&lt;/ResponseText&gt;</span>
            <span style=color:#f92672>&lt;State&gt;</span>OH<span style=color:#f92672>&lt;/State&gt;</span>
            <span style=color:#f92672>&lt;City&gt;</span>Columbus<span style=color:#f92672>&lt;/City&gt;</span>
            <span style=color:#f92672>&lt;WeatherStationCity&gt;</span>Columbus<span style=color:#f92672>&lt;/WeatherStationCity&gt;</span>
            <span style=color:#f92672>&lt;WeatherID&gt;</span>14<span style=color:#f92672>&lt;/WeatherID&gt;</span>
            <span style=color:#f92672>&lt;Description&gt;</span>Cloudy<span style=color:#f92672>&lt;/Description&gt;</span>
            <span style=color:#f92672>&lt;Temperature&gt;</span>63<span style=color:#f92672>&lt;/Temperature&gt;</span>
            <span style=color:#f92672>&lt;RelativeHumidity&gt;</span>83<span style=color:#f92672>&lt;/RelativeHumidity&gt;</span>
            <span style=color:#f92672>&lt;Wind&gt;</span>CALM<span style=color:#f92672>&lt;/Wind&gt;</span>
            <span style=color:#f92672>&lt;Pressure&gt;</span>29.93R<span style=color:#f92672>&lt;/Pressure&gt;</span>
            <span style=color:#f92672>&lt;Visibility/&gt;</span>
            <span style=color:#f92672>&lt;WindChill/&gt;</span>
            <span style=color:#f92672>&lt;Remarks/&gt;</span>
        <span style=color:#f92672>&lt;/GetCityWeatherByZIPResult&gt;</span>
        <span style=color:#f92672>&lt;/GetCityWeatherByZIPResponse&gt;</span>
    <span style=color:#f92672>&lt;/soap:Body&gt;</span>
    <span style=color:#f92672>&lt;/soap:Envelope&gt;</span></code></pre></td></tr></table></div></div></div></figure></p><p>Let&rsquo;s begin by creating a new Apama project. We will name it WeatherWebServiceDemo.</p><p>While creating the project using &lsquo;New Apama Project Wizard&rsquo;, select &lsquo;Web Services Client Adapter&rsquo; bundle</p><p><img src=/img/2016/ApamaWS_1.PNG alt=img></p><p>Now let&rsquo;s describe the event definitions. We will define events such that their structure corresponds directly to the XML structure of the web service message shown above. Such type of mapping is called as &lsquo;Convention based&rsquo; mapping where Apama automatically converts the event instance to the request XML structure of the web service, and also converts the web service response XML to an event instance.</p><p>The event definition will look like this:</p><figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    event GetCityWeatherByZIPType <span style=color:#f92672>{</span>
        string ZIP<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    event GetCityWeatherByZIPResultType <span style=color:#f92672>{</span>
        string Success<span style=color:#f92672>;</span>
        string ResponseText<span style=color:#f92672>;</span>
        string State<span style=color:#f92672>;</span>
        string City<span style=color:#f92672>;</span>
        string WeatherStationCity<span style=color:#f92672>;</span>
        string WeatherID<span style=color:#f92672>;</span>
        string Description<span style=color:#f92672>;</span>
        string Temperature<span style=color:#f92672>;</span>
        string RelativeHumidity<span style=color:#f92672>;</span>
        string Wind<span style=color:#f92672>;</span>
        string Pressure<span style=color:#f92672>;</span>
        string Visibility<span style=color:#f92672>;</span>
        string WindChill<span style=color:#f92672>;</span>
        string Remarks<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    event GetCityWeatherByZIPResponseType <span style=color:#f92672>{</span>
        GetCityWeatherByZIPResultType GetCityWeatherByZIPResult<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    event MyRequest <span style=color:#f92672>{</span>
        GetCityWeatherByZIPType GetCityWeatherByZIP<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    event MyResponse <span style=color:#f92672>{</span>
        GetCityWeatherByZIPResponseType GetCityWeatherByZIPResponse<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    event MyZIP <span style=color:#f92672>{</span>
        string ZIP<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span></code></pre></td></tr></table></div></div></div></figure><p>Out of these the MyRequest and MyResponse event definitions are wrapper types required for Convention based mapping, whereas MyZIP is our custom event definition which we will use to request weather information for a zip code.</p><p>After describing the event definitions, we can import the WSDL and map the event definitions to web service input and output. To do that, open the adapter instance file located in Adapters->WebServices Client Adapter -> instance1 in your project and click on + (plus) to add the operation name, it will bring up the following screen to configure your web service.</p><p><img src=/img/2016/ApamaWS_1_Import.PNG alt=img></p><p>In this screen click on &lsquo;Add&rsquo; operation, and then click on &lsquo;Create New&rsquo; to bring the following screen to import the WSDL and select the operation that you want to use.</p><p><img src=/img/2016/ApamaWS_2_Import.PNG alt=img></p><p>We will only import GetCityWeatherByZIP operation for our application as shown below.</p><p><img src=/img/2016/ApamaWS_3_Import.PNG alt=img></p><p>After importing the operation select the input and output event types corresponding to the input and output of the operation</p><p><img src=/img/2016/ApamaWS_4_Import.PNG alt=img></p><p>Once input and output event for the web service is selected, you can perform the mapping of fields to web service parameters</p><p>In the input mapping it&rsquo;s important to select the &lsquo;Convert to XML&rsquo; transformation to convert the event structure to XML. You can select this transformation by using &lsquo;Add computed node&rsquo; option in your input mapping.</p><p><img src=/img/2016/ApamaWS_input_mapping.PNG alt=img></p><p>The output mapping is straightforward as shown below.</p><p><img src=/img/2016/ApamaWS_output_mapping.PNG alt=img></p><p>Once the mapping is completed you can write your monitor script (EPL) program to call the weather service and then identify the pattern in the data.</p><p>Following simple monitor script program will just print the weather information received from web service.</p><p>In this script, whenever the correlator engine detects MyZIP event in the queue, it will route the MyRequest event. MyRequest event will in turn call the web service to get the weather information using web service client adapter and receive the response in the form of MyResponse event. Whenever MyResponse event is detected, our script prints the weather information in the log.</p><figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    monitor WeatherServiceMonitor <span style=color:#f92672>{</span>
        MyRequest myRequest<span style=color:#f92672>;</span>
        MyResponse myResponse<span style=color:#f92672>;</span>
        MyZIP myZIP<span style=color:#f92672>;</span>

        action <span style=color:#a6e22e>onload</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>

            on all <span style=color:#a6e22e>MyZIP</span><span style=color:#f92672>():</span> myZIP <span style=color:#f92672>{</span>
                print <span style=color:#e6db74>&#34;Received request for ZIP code : &#34;</span> <span style=color:#f92672>+</span> myZIP<span style=color:#f92672>.</span><span style=color:#a6e22e>ZIP</span><span style=color:#f92672>;</span>
                print <span style=color:#e6db74>&#34;Preparing to call the service &#34;</span> <span style=color:#f92672>;</span>
                myRequest<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIP</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ZIP</span> <span style=color:#f92672>:=</span> myZIP<span style=color:#f92672>.</span><span style=color:#a6e22e>ZIP</span><span style=color:#f92672>;</span>
                route myRequest<span style=color:#f92672>;</span>            
            <span style=color:#f92672>}</span>

            on all <span style=color:#a6e22e>MyResponse</span><span style=color:#f92672>():</span> myResponse <span style=color:#f92672>{</span>
                print 
                    myResponse<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIPResponse</span><span style=color:#f92672>.</span>
                    GetCityWeatherByZIPResult<span style=color:#f92672>.</span><span style=color:#a6e22e>ResponseText</span> 
                <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> 
                <span style=color:#f92672>+</span>     myResponse<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIPResponse</span><span style=color:#f92672>.</span>
                    GetCityWeatherByZIPResult<span style=color:#f92672>.</span><span style=color:#a6e22e>City</span>
                <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> 
                <span style=color:#f92672>+</span>     myResponse<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIPResponse</span><span style=color:#f92672>.</span>
                    GetCityWeatherByZIPResult<span style=color:#f92672>.</span><span style=color:#a6e22e>Temperature</span>
                <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> 
                <span style=color:#f92672>+</span>     myResponse<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIPResponse</span><span style=color:#f92672>.</span>
                    GetCityWeatherByZIPResult<span style=color:#f92672>.</span><span style=color:#a6e22e>Description</span>
                <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> 
                <span style=color:#f92672>+</span>     myResponse<span style=color:#f92672>.</span><span style=color:#a6e22e>GetCityWeatherByZIPResponse</span><span style=color:#f92672>.</span>
                    GetCityWeatherByZIPResult<span style=color:#f92672>.</span><span style=color:#a6e22e>Wind</span><span style=color:#f92672>;</span> 
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span></code></pre></td></tr></table></div></div></div></figure><p>Let&rsquo;s fetch the weather for zip code 43209<figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>    C:<span style=color:#ae81ff>\S</span>oftwareAG<span style=color:#ae81ff>\A</span>pama<span style=color:#ae81ff>\b</span>in&gt;engine_send
    MyZIP<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;43209&#34;</span><span style=color:#f92672>)</span>;</code></pre></td></tr></table></div></div></div></figure></p><p><img src=/img/2016/ApamaWS_result.PNG alt=img></p><p>We can invoke the web service periodically to fetch the weather information using &lsquo;on all wait() ' as shown below. This code snippet will route the MyZIP event every minute (60 seconds) to fetch the weather information.</p><figure class=code><figcaption><span></span></figcaption><div class=codewrapper><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    on all <span style=color:#a6e22e>wait</span> <span style=color:#f92672>(</span>60<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      MyZIP<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;43209&#34;</span><span style=color:#f92672>);</span> 
    <span style=color:#f92672>}</span></code></pre></td></tr></table></div></div></div></figure><p>Instead of logging the information to a file we can actually use Apama Dashboard to visually monitor the weather fluctuation and any patterns in the data. I will explain how to do that in another post.</p></article><article><header><p class=meta>Aug 17, 2016
- 4 minute read
- <a href=https://www.dhimate.com/2016/using-oauth-2.0-with-webmethods-integration-server/#disqus_thread>Comments</a>
- <a class=label href=https://www.dhimate.com/categories/programming/>Programming</a></p><h1 class=entry-title><a href=https://www.dhimate.com/2016/using-oauth-2.0-with-webmethods-integration-server/>Using OAuth 2.0 with webMethods Integration Server</a></h1></header><p>webMethods Integration Server supports OAuth 2.0. The Integration Server (IS) can be used as an OAuth client, an authorization server, or a resource server. This post describes how to use OAuth 2.0 with Integration Server in a simplified format.</p><p>For ease of understanding, we will consider IS as an authorization server and resource server in this post. However, the same concept can be used to set up any role that you may want IS to perform in your architecture.</p><p>Integration Server supports two types of OAuth grant types</p><p><strong>Authorization Code</strong>:
This is a secure way of obtaining an OAuth token, where the client needs to authorize himself with the authorization server. The authorization server responds with the authorization code, which the client uses to obtain the access token. This approach is typically used by clients hosted on web server-based applications where the application code runs on the server.</p><p><strong>Implicit</strong>:
This approach is used by mobile apps or browser-based applications. In this approach, the client does not need to authorize himself with the authorization server. The access token is passed through the browser, as a fragment in the URL. A simple javascript code can be used to extract the access token from the fragment.</p><p>We will see how to implement both approaches in the integration server. For both approaches, you need to do some basic setup on the IS console.</p><ul><li><strong>Client Configuration</strong>:</li></ul><p>A client must register himself and obtain client_id from the integration server. In the IS console go to Security->OAuth->Client Registration page and click on &lsquo;Register Client&rsquo;. Enter the information as shown below.
Redirect URL should be the URL, where IS will redirect the page after authorizing the request. I have created a simple RESTful service on the IS as a redirect URL.</p><figure><img src=/img/2016/OAuth_1.PNG alt=dwarf width=700px></figure><p>Remember that the Client ID will be generated when you click Save Changes.</p><figure><img src=/img/2016/OAuth_2.PNG alt=dwarf width=700px></figure><p>Your client will use this &lsquo;Client ID&rsquo; to authorize himself and request an access token.</p><ul><li><strong>Scope Management</strong>:</li></ul><p>The scope indicates the resources the client can access on behalf of resource owner. You need to indicate one or more folders or services on the IS in the scope. Once a client is granted access to a scope, he can access the folders and services included in that scope.</p><p>Go to Security->Oauth->Scope Management page and click on &lsquo;Add Scope&rsquo;. Once the page is open, mention the scope details as shown below</p><p>Here we have included one service &lsquo;OAuthDemo&rsquo; in the scope. This is an URL Alias for /rest/Sandbox.OAuthDemo folder on the server</p><figure><img src=/img/2016/OAuth_3.PNG alt=dwarf width=700px></figure><p>Once the scope is added, map the scope with the client using the &lsquo;Associate Scope to Clients&rsquo; option on the &lsquo;Scope Management&rsquo; page.</p><figure><img src=/img/2016/OAuth_4.PNG alt=dwarf width=700px></figure><p>Once this setup is done your client can request the access token either for the Authorization Code approach or Implicit approach.</p><ul><li>Authorization Code:</li></ul><p>Requesting token for authorization code approach is a 2 step process. In the first step, the client authorizes himself with the authorization server using <code>pub.auth:authorize</code> service and receives the authorization code. Once the authorization code is received, it can be used to obtain the access token using <code>pub.auth:getAccessToken</code> service.</p><p>When the client initiates the <code>pub.oauth:authorize</code> request, it brings up a page for the resource owner to either approve the access request or reject it.</p><figure><img src=/img/2016/OAuth_5.PNG alt=dwarf width=700px></figure><p>When the resource owner approves the request, the integration server generates the authorization code and redirects the page to the &lsquo;redirect URL&rsquo; specified in the client configuration.</p><p>The service hosted at redirect URL passes the authorization code to <code>pub.oauth:getAccessToken</code> service to exchange authorization code for an access token as shown below</p><figure><img src=/img/2016/OAuth_6.PNG alt=dwarf width=700px></figure><p>The client application can now use the access token to access the resource described in the Scope.</p><ul><li>Implicit:</li></ul><p>Requesting token for implicit approach is one-step process.
When the client initiates the <code>pub.oauth:authorize</code> request, it indicates the implicit approach by mentioning the response type as &lsquo;token&rsquo; in the input to <code>pub.oauth:authorize</code> service. The service brings up a page for resource owner to either approve the access request or reject it.</p><figure><img src=/img/2016/OAuth_7.PNG alt=dwarf width=700px></figure><p>When the resource owner approves the request the integration server generates the access token and includes it as a fragment in the redirect URI, which the client application can extract it using simple javascript code.</p><figure><img src=/img/2016/OAuth_8.PNG alt=dwarf width=700px></figure><p>Integration Server administrator can verify all the tokens in the IS console</p><figure><img src=/img/2016/OAuth_9.PNG alt=dwarf width=700px></figure><p>The client application can use the token as a bearer token to access the resource on the server.</p><figure><img src=/img/2016/OAuth_10.PNG alt=dwarf width=700px></figure><p>If the client application tries to use an invalid token or tries to access a service which is not in the scope, it will get an error</p><figure><img src=/img/2016/OAuth_11.PNG alt=dwarf width=700px></figure></article><div class=pagination><a href=/ aria-label=First class=label-pagination><i class="fa fa-angle-double-left fa-lg"></i></a><a href=/page/4/ aria-label=Previous class=label-pagination><i class="fa fa-angle-left fa-lg"></i></a><a href=/ class=label-pagination>1</a>
<a href=/page/2/ class=label-pagination>2</a>
<a href=/page/3/ class=label-pagination>3</a>
<a href=/page/4/ class=label-pagination>4</a>
<a href=/page/5/ class=label-pagination>5</a>
<a href=/page/6/ class=label-pagination>6</a>
<a href=/page/6/ aria-label=Next class=label-pagination><i class="fa fa-angle-right fa-lg"></i></a><a href=/page/6/ aria-label=Last><i class="fa fa-angle-double-right fa-lg"></i></a></div></div><aside class="sidebar thirds"><section class="first odd"><h1>About Me</h1><p>I’m Yogesh Dhimate. This is my personal website. All opinions expressed here are my own. Click on <a href=/about>About</a> to know more.</p></section><ul class=sidebar-nav><li class=sidebar-nav-item><a target=_blank href=https://github.com/dhimate/ title=https://github.com/dhimate/><i class="fa fa-github fa-3x"></i></a><a target=_blank href=https://linkedin.com/in/dhimate title=https://linkedin.com/in/dhimate><i class="fa fa-linkedin fa-3x"></i></a></li></ul><section class=odd></section><section class=even><h1>Recent Posts</h1><ul id=recent_posts><li class=post><a href=/2021/using-epics-fhir-apis-in-mule-4/>Using Epic's FHIR APIs in Mule 4</a></li><li class=post><a href=/2021/how-to-use-different-authentication-options-for-salesforce-connector-in-mule-4/>How to Use Different Authentication Options for Salesforce Connector in Mule 4</a></li><li class=post><a href=/2021/reflections-on-range-by-david-epstein/>Reflections on Range by David Epstein</a></li><li class=post><a href=/2021/externalizing-queries-in-mule-application/>Externalizing Queries in Mule Application</a></li><li class=post><a href=/2021/drinking-water-habit/>Drinking Water Habit</a></li></ul></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2021 Yogesh Dhimate - <a href=https://www.dhimate.com/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io>Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/>Hugo-Octopress</a> theme.</p></footer><script>var _gaq=[['_setAccount','UA-65531716-1'],['_trackPageview']];(function(a,b){var c=a.createElement(b),d=a.getElementsByTagName(b)[0];c.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js',d.parentNode.insertBefore(c,d)})(document,'script')</script></body></html>